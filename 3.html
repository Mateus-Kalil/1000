<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Snake (Cobrinha) - MKGAMES</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="icon" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHJlY3Qgd2lkdGg9IjE2IiBoZWlnaHQ9IjE2IiByeD0iMiIgZmlsbD0iIzAzMDAxNCIvPgogIDxwYXRoIGQ9Ik0zIDMgTCA3IDMgTCA3IDcgTCAxMSAzIEwgMTMgMyBMIDEzIDEzIEwgOSAxMyBMIDkgOSBMIDUgMTMgTCAzIDEzIFoiIGZpbGw9IiMwMGYzZmYiIHN0cm9rZT0iI2Y3MDBmZiIgc3Ryb2tlLXdpZHRoPSIwLjUiPgogICAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0iZmlsbCIgdmFsdWVzPSIjMDBmM2ZmOyNmNzAwZmY7IzAwZjNmZiIgZHVyPSIzcyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiIC8+CiAgPC9wYXRoPgo8L3N2Zz4=" type="image/svg+xml">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700;800;900&family=Rajdhani:wght@300;400;500;600;700&display=swap');
        
        :root {
            --primary: #00f3ff;
            --secondary: #f700ff;
            --bg-dark: #030014;
            --bg-card: rgba(13, 6, 31, 0.7);
            --text: #ffffff;
            --glow-strong: 0 0 10px rgba(0, 243, 255, 0.8), 0 0 20px rgba(0, 243, 255, 0.4);
            --glow-soft: 0 0 15px rgba(247, 0, 255, 0.4);
            --snake-head: #f700ff;
            --snake-body: #00f3ff;
            --food-color: #ff0000;
            --special-food: #ffdd00;
            --power-up: #00ff00;
            --obstacle: #ff6600;
            --portal: #9900ff;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Rajdhani', sans-serif;
            background-color: var(--bg-dark);
            color: var(--text);
            overflow-x: hidden;
            min-height: 100vh;
            position: relative;
            padding-bottom: 80px;
        }
        
        #canvas-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }
        
        header {
            padding: 1.5rem 2rem;
            position: relative;
            z-index: 10;
            backdrop-filter: blur(5px);
            text-align: center;
        }
        
        .logo {
            font-family: 'Orbitron', sans-serif;
            font-size: 2.5rem;
            font-weight: 800;
            text-align: center;
            letter-spacing: 3px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: var(--glow-soft);
            margin-bottom: 0.5rem;
            position: relative;
            animation: pulse 2s infinite alternate;
        }
        
        .logo::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 50%;
            transform: translateX(-50%);
            width: 200px;
            height: 2px;
            background: linear-gradient(90deg, transparent, var(--primary), var(--secondary), transparent);
        }
        
        .tagline {
            text-align: center;
            font-size: 1.2rem;
            margin-bottom: 1rem;
            opacity: 0.8;
        }
        
        main {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
            z-index: 1;
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        /* Menu principal */
        .menu-container {
            width: 100%;
            max-width: 800px;
            text-align: center;
            padding: 2rem;
            background: rgba(13, 6, 31, 0.7);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            margin: 0 auto;
            transition: all 0.5s;
        }
        
        .menu-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 2rem;
            margin-bottom: 2rem;
            color: var(--primary);
            text-shadow: var(--glow-soft);
        }
        
        .menu-subtitle {
            font-size: 1.2rem;
            margin-bottom: 2rem;
            opacity: 0.8;
        }
        
        .menu-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .mode-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
            margin-bottom: 2rem;
        }
        
        .skin-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 1rem;
            margin-top: 2rem;
            margin-bottom: 2rem;
        }
        
        .level-btn, .mode-btn, .skin-btn, .start-btn, .back-btn {
            background: linear-gradient(90deg, rgba(0, 243, 255, 0.1), rgba(247, 0, 255, 0.1));
            border: 1px solid rgba(0, 243, 255, 0.3);
            color: var(--text);
            padding: 1rem 1.5rem;
            font-family: 'Orbitron', sans-serif;
            font-size: 1rem;
            font-weight: 600;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
            text-transform: uppercase;
            letter-spacing: 1px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }
        
        .level-btn:hover, .mode-btn:hover, .skin-btn:hover, .start-btn:hover, .back-btn:hover {
            background: linear-gradient(90deg, rgba(0, 243, 255, 0.3), rgba(247, 0, 255, 0.3));
            box-shadow: var(--glow-soft);
            transform: translateY(-2px);
        }
        
        .level-btn:active, .mode-btn:active, .skin-btn:active, .start-btn:active, .back-btn:active {
            transform: translateY(1px);
        }
        
        .level-btn::before, .mode-btn::before, .skin-btn::before, .start-btn::before, .back-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: all 0.5s;
        }
        
        .level-btn:hover::before, .mode-btn:hover::before, .skin-btn:hover::before, .start-btn:hover::before, .back-btn:hover::before {
            left: 100%;
        }
        
        .level-btn.active, .mode-btn.active, .skin-btn.active {
            background: linear-gradient(90deg, rgba(0, 243, 255, 0.4), rgba(247, 0, 255, 0.4));
            box-shadow: var(--glow-soft);
        }
        
        .level-desc, .mode-desc {
            font-size: 0.8rem;
            opacity: 0.7;
        }
        
        .level-icon, .mode-icon, .skin-icon {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
            color: var(--primary);
            text-shadow: var(--glow-soft);
        }
        
        .start-btn {
            background: linear-gradient(90deg, rgba(0, 243, 255, 0.5), rgba(247, 0, 255, 0.5));
            border: none;
            color: var(--bg-dark);
            font-weight: 700;
            box-shadow: var(--glow-soft);
            width: 200px;
            margin: 0 auto;
            padding: 1rem 2rem;
        }
        
        .start-btn:hover {
            background: linear-gradient(90deg, rgba(0, 243, 255, 0.8), rgba(247, 0, 255, 0.8));
            box-shadow: var(--glow-strong);
        }
        
        .back-btn {
            width: 200px;
            margin: 0 auto;
            margin-top: 1rem;
        }
        
        /* √Årea de jogo */
        .game-container {
            display: none;
            width: 100%;
            max-width: 1200px;
            flex-direction: column;
            align-items: center;
        }
        
        .game-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            max-width: 800px;
            margin-bottom: 1.5rem;
            padding: 1rem;
            background: rgba(13, 6, 31, 0.7);
            backdrop-filter: blur(10px);
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .game-info {
            display: flex;
            align-items: center;
            gap: 1.5rem;
        }
        
        .info-box {
            display: flex;
            flex-direction: column;
            align-items: center;
            background: rgba(0, 243, 255, 0.1);
            padding: 0.5rem 1rem;
            border-radius: 10px;
            min-width: 80px;
        }
        
        .info-label {
            font-size: 0.8rem;
            opacity: 0.7;
        }
        
        .info-value {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.2rem;
            font-weight: bold;
        }
        
        .game-controls {
            display: flex;
            gap: 1rem;
        }
        
        .control-btn {
            background: rgba(0, 243, 255, 0.2);
            border: 1px solid rgba(0, 243, 255, 0.4);
            color: var(--text);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .control-btn:hover {
            background: rgba(0, 243, 255, 0.4);
            box-shadow: var(--glow-soft);
        }
        
        /* Tabuleiro do jogo */
        #game-board {
            position: relative;
            width: 100%;
            max-width: 600px;
            aspect-ratio: 1 / 1;
            background: rgba(13, 6, 31, 0.7);
            border: 2px solid var(--primary);
            border-radius: 10px;
            box-shadow: var(--glow-soft), inset 0 0 20px rgba(0, 243, 255, 0.2);
            overflow: hidden;
        }
        
        .snake-grid {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: grid;
            z-index: 1;
        }
        
        .snake-segment {
            position: absolute;
            background-color: var(--snake-body);
            border-radius: 2px;
            box-shadow: 0 0 8px var(--snake-body);
            z-index: 2;
            transition: all 0.05s linear;
        }
        
        .snake-head {
            background-color: var(--snake-head);
            box-shadow: 0 0 12px var(--snake-head);
            z-index: 3;
        }
        
        .food {
            position: absolute;
            background-color: var(--food-color);
            border-radius: 50%;
            box-shadow: 0 0 10px var(--food-color);
            z-index: 2;
            animation: pulse 1.5s infinite alternate;
        }
        
        .special-food {
            background-color: var(--special-food);
            box-shadow: 0 0 15px var(--special-food);
            animation: pulse 0.8s infinite alternate;
        }
        
        .power-up {
            position: absolute;
            background-color: var(--power-up);
            border-radius: 4px;
            box-shadow: 0 0 10px var(--power-up);
            z-index: 2;
            animation: rotate 3s infinite linear;
        }
        
        .obstacle {
            position: absolute;
            background-color: var(--obstacle);
            box-shadow: 0 0 8px var(--obstacle);
            z-index: 2;
        }
        
        .portal {
            position: absolute;
            background: radial-gradient(circle, var(--portal) 30%, transparent 70%);
            border-radius: 50%;
            box-shadow: 0 0 15px var(--portal);
            z-index: 1;
            animation: portalPulse 2s infinite alternate;
        }
        
        .grid-line {
            position: absolute;
            background-color: rgba(0, 243, 255, 0.1);
            z-index: 0;
        }
        
        .vertical-line {
            width: 1px;
            height: 100%;
        }
        
        .horizontal-line {
            width: 100%;
            height: 1px;
        }
        
        /* Controles m√≥veis */
        .mobile-controls {
            display: none;
            width: 100%;
            max-width: 400px;
            margin-top: 2rem;
        }
        
        .direction-pad {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            grid-template-rows: repeat(3, 1fr);
            gap: 5px;
        }
        
        .direction-btn {
            background: rgba(0, 243, 255, 0.2);
            border: 1px solid rgba(0, 243, 255, 0.4);
            color: var(--text);
            height: 60px;
            border-radius: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 2rem;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .direction-btn:active {
            background: rgba(0, 243, 255, 0.5);
            box-shadow: var(--glow-soft);
        }
        
        /* Bot√£o para cima (posi√ß√£o 2) */
        .direction-pad .direction-btn:nth-child(2) {
            grid-column: 2;
            grid-row: 1;
        }
        
        /* Bot√£o para esquerda (posi√ß√£o 4) */
        .direction-pad .direction-btn:nth-child(3) {
            grid-column: 1;
            grid-row: 2;
        }
        
        /* Posi√ß√£o central vazia (posi√ß√£o 5) */
        .direction-pad .empty {
            grid-column: 2;
            grid-row: 2;
        }
        
        /* Bot√£o para direita (posi√ß√£o 6) */
        .direction-pad .direction-btn:nth-child(4) {
            grid-column: 3;
            grid-row: 2;
        }
        
        /* Bot√£o para baixo (posi√ß√£o 8) */
        .direction-pad .direction-btn:nth-child(5) {
            grid-column: 2;
            grid-row: 3;
        }
        
        /* Status de Power-up */
        .power-up-status {
            display: none;
            position: absolute;
            top: 10px;
            left: 10px;
            background: rgba(0, 255, 0, 0.2);
            border: 1px solid rgba(0, 255, 0, 0.5);
            border-radius: 5px;
            padding: 5px 10px;
            font-size: 0.9rem;
            animation: pulse 1s infinite alternate;
        }
        
        .power-up-status.active {
            display: block;
        }
        
        /* N√≠veis de progresso */
        .progress-container {
            width: 100%;
            max-width: 600px;
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            overflow: hidden;
            margin-top: 1rem;
        }
        
        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            width: 0%;
            transition: width 0.3s linear;
        }
        
        /* Game Over e Level Complete */
        .result-screen {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(3, 0, 20, 0.8);
            backdrop-filter: blur(5px);
            z-index: 100;
            justify-content: center;
            align-items: center;
        }
        
        .result-box {
            background: rgba(13, 6, 31, 0.9);
            padding: 2rem;
            border-radius: 20px;
            border: 2px solid var(--primary);
            text-align: center;
            max-width: 400px;
            width: 90%;
            box-shadow: var(--glow-strong);
            animation: result-appear 0.5s forwards;
            transform: scale(0.8);
            opacity: 0;
        }
        
        @keyframes result-appear {
            to {
                transform: scale(1);
                opacity: 1;
            }
        }
        
        .result-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 2rem;
            margin-bottom: 1rem;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: var(--glow-soft);
        }
        
        .stats-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            margin: 1.5rem 0;
        }
        
        .stat-box {
            background: rgba(0, 243, 255, 0.1);
            padding: 0.5rem;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .stat-label {
            font-size: 0.8rem;
            opacity: 0.7;
        }
        
        .stat-value {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.5rem;
            font-weight: bold;
        }
        
        .result-btns {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-top: 1.5rem;
        }
        
        .result-btn {
            background: linear-gradient(90deg, rgba(0, 243, 255, 0.3), rgba(247, 0, 255, 0.3));
            border: 1px solid rgba(0, 243, 255, 0.5);
            color: var(--text);
            padding: 0.7rem 1.3rem;
            font-family: 'Orbitron', sans-serif;
            font-size: 1rem;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            min-width: 120px;
        }
        
        .result-btn:hover {
            background: linear-gradient(90deg, rgba(0, 243, 255, 0.6), rgba(247, 0, 255, 0.6));
            box-shadow: var(--glow-soft);
        }
        
        .star-rating {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            margin: 1rem 0;
        }
        
        .star {
            font-size: 2rem;
            color: rgba(255, 255, 255, 0.2);
        }
        
        .star.filled {
            color: #ffdd00;
            text-shadow: 0 0 10px rgba(255, 221, 0, 0.8);
        }
        
        /* High Scores */
        .high-scores {
            display: none;
            width: 100%;
            max-width: 800px;
            text-align: center;
            padding: 2rem;
            background: rgba(13, 6, 31, 0.7);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            margin: 0 auto;
            transition: all 0.5s;
        }
        
        .scores-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 2rem;
            margin-bottom: 2rem;
            color: var(--primary);
            text-shadow: var(--glow-soft);
        }
        
        .scores-list {
            width: 100%;
            margin-bottom: 2rem;
        }
        
        .scores-header {
            display: grid;
            grid-template-columns: 50px 1fr 100px 100px 100px;
            padding: 0.5rem;
            background: rgba(0, 243, 255, 0.2);
            border-radius: 8px 8px 0 0;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }
        
        .score-item {
            display: grid;
            grid-template-columns: 50px 1fr 100px 100px 100px;
            padding: 0.5rem;
            background: rgba(0, 243, 255, 0.1);
            margin-bottom: 0.5rem;
            border-radius: 4px;
            transition: all 0.3s;
        }
        
        .score-item:hover {
            background: rgba(0, 243, 255, 0.2);
            transform: translateX(5px);
        }
        
        .score-rank {
            font-weight: bold;
        }
        
        .score-mode {
            text-align: left;
        }
        
        .score-score, .score-size, .score-time {
            text-align: center;
        }
        
        /* Instru√ß√µes */
        .instructions {
            display: none;
            width: 100%;
            max-width: 800px;
            padding: 2rem;
            background: rgba(13, 6, 31, 0.7);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            margin: 0 auto;
            transition: all 0.5s;
        }
        
        .instructions-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 2rem;
            margin-bottom: 1.5rem;
            color: var(--primary);
            text-shadow: var(--glow-soft);
            text-align: center;
        }
        
        .instructions-content {
            margin-bottom: 2rem;
            line-height: 1.6;
        }
        
        .instructions-section {
            margin-bottom: 1.5rem;
        }
        
        .instructions-section h3 {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.2rem;
            margin-bottom: 0.5rem;
            color: var(--primary);
        }
        
        .item-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1rem;
            margin: 1rem 0;
        }
        
        .item-box {
            background: rgba(0, 243, 255, 0.1);
            border: 1px solid rgba(0, 243, 255, 0.3);
            border-radius: 8px;
            padding: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .item-icon {
            width: 20px;
            height: 20px;
            border-radius: 4px;
        }
        
        .item-icon.food {
            background-color: var(--food-color);
            box-shadow: 0 0 5px var(--food-color);
            border-radius: 50%;
        }
        
        .item-icon.special-food {
            background-color: var(--special-food);
            box-shadow: 0 0 5px var(--special-food);
            border-radius: 50%;
        }
        
        .item-icon.power-up {
            background-color: var(--power-up);
            box-shadow: 0 0 5px var(--power-up);
        }
        
        .item-icon.obstacle {
            background-color: var(--obstacle);
            box-shadow: 0 0 5px var(--obstacle);
        }
        
        .item-icon.portal {
            background-color: var(--portal);
            box-shadow: 0 0 5px var(--portal);
            border-radius: 50%;
        }
        
        .key-controls {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin: 1.5rem 0;
        }
        
        .key {
            background: rgba(0, 243, 255, 0.2);
            border: 1px solid rgba(0, 243, 255, 0.4);
            border-radius: 8px;
            padding: 0.5rem 1rem;
            font-family: 'Orbitron', sans-serif;
            font-size: 1.2rem;
            min-width: 50px;
            text-align: center;
            box-shadow: 0 0 5px rgba(0, 243, 255, 0.3);
        }
        
        /* Pausa */
        .pause-screen {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(3, 0, 20, 0.8);
            backdrop-filter: blur(5px);
            z-index: 100;
            justify-content: center;
            align-items: center;
        }
        
        .pause-box {
            background: rgba(13, 6, 31, 0.9);
            padding: 2rem;
            border-radius: 20px;
            border: 2px solid var(--primary);
            text-align: center;
            max-width: 400px;
            width: 90%;
            box-shadow: var(--glow-strong);
        }
        
        .pause-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 2rem;
            margin-bottom: 1.5rem;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: var(--glow-soft);
        }
        
        .pause-btns {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1rem;
            margin-top: 1.5rem;
        }
        
        .pause-btn {
            background: linear-gradient(90deg, rgba(0, 243, 255, 0.3), rgba(247, 0, 255, 0.3));
            border: 1px solid rgba(0, 243, 255, 0.5);
            color: var(--text);
            padding: 0.7rem 1.3rem;
            font-family: 'Orbitron', sans-serif;
            font-size: 1rem;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }
        
        .pause-btn:hover {
            background: linear-gradient(90deg, rgba(0, 243, 255, 0.6), rgba(247, 0, 255, 0.6));
            box-shadow: var(--glow-soft);
        }
        
        .pause-btn i {
            font-size: 1.2rem;
        }
        
        /* Anima√ß√µes e efeitos */
        @keyframes pulse {
            0% {
                transform: scale(1);
                opacity: 0.8;
            }
            100% {
                transform: scale(1.1);
                opacity: 1;
            }
        }
        
        @keyframes portalPulse {
            0% {
                transform: scale(1);
                opacity: 0.7;
            }
            100% {
                transform: scale(1.3);
                opacity: 0.9;
            }
        }
        
        @keyframes rotate {
            0% {
                transform: rotate(0deg);
            }
            100% {
                transform: rotate(360deg);
            }
        }
        
        .fade-in {
            animation: fadeIn 0.5s forwards;
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .flash {
            animation: flash 0.5s;
        }
        
        @keyframes flash {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .shake {
            animation: shake 0.5s;
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }
        
        /* Rodap√© */
        footer {
            text-align: center;
            padding: 2rem;
            backdrop-filter: blur(5px);
            background-color: rgba(3, 0, 20, 0.5);
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
        }
        
        .signature {
            font-family: 'Orbitron', sans-serif;
            font-size: 1rem;
            letter-spacing: 2px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            display: inline-block;
            position: relative;
        }
        
        .signature::after {
            content: '';
            position: absolute;
            bottom: -3px;
            left: 0;
            width: 100%;
            height: 1px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
        }
        
        .home-btn {
            position: fixed;
            top: 20px;
            left: 20px;
            background: rgba(0, 243, 255, 0.1);
            border: 1px solid rgba(0, 243, 255, 0.3);
            color: var(--text);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s;
            z-index: 50;
        }
        
        .home-btn:hover {
            background: rgba(0, 243, 255, 0.3);
            transform: rotate(360deg);
        }
        
        /* Responsividade */
        @media (max-width: 768px) {
            .logo {
                font-size: 2rem;
            }
            
            main {
                padding: 1rem;
            }
            
            .game-header {
                flex-direction: column;
                gap: 1rem;
            }
            
            .game-info {
                width: 100%;
                justify-content: space-between;
            }
            
            .menu-options, .mode-options {
                grid-template-columns: 1fr;
            }
            
            .mobile-controls {
                display: block;
            }
            
            .scores-header, .score-item {
                grid-template-columns: 30px 1fr 60px 60px 60px;
                font-size: 0.9rem;
            }
            
            .result-btns {
                flex-direction: column;
            }
        }
        
        @media (max-width: 480px) {
            .logo {
                font-size: 1.5rem;
            }
            
            .game-info {
                flex-wrap: wrap;
                gap: 0.5rem;
            }
            
            .info-box {
                padding: 0.3rem 0.5rem;
                min-width: 70px;
            }
            
            .info-value {
                font-size: 1rem;
            }
            
            .scores-header, .score-item {
                grid-template-columns: 20px 1fr 40px 40px 40px;
                font-size: 0.8rem;
                padding: 0.3rem;
            }
        }
    </style>
</head>
<body>
    <div id="canvas-container"></div>
    
    <a href="index.html" class="home-btn" title="Voltar ao Portal">
        <i class="fas fa-home"></i>
    </a>
    
    <header>
        <h1 class="logo">SNAKE (COBRINHA)</h1>
        <p class="tagline">MKGAMES - Vers√£o Futurista</p>
    </header>
    
    <main>
        <!-- Menu Principal -->
        <div class="menu-container" id="main-menu">
            <h2 class="menu-title">Escolha o Modo de Jogo</h2>
            
            <div class="mode-options">
                <button class="mode-btn active" data-mode="classic">
                    <i class="mode-icon fas fa-infinity"></i>
                    <span>Cl√°ssico</span>
                    <span class="mode-desc">Jogo tradicional</span>
                </button>
                
                <button class="mode-btn" data-mode="time-attack">
                    <i class="mode-icon fas fa-stopwatch"></i>
                    <span>Contra o Tempo</span>
                    <span class="mode-desc">Tempo limitado</span>
                </button>
                
                <button class="mode-btn" data-mode="survival">
                    <i class="mode-icon fas fa-heartbeat"></i>
                    <span>Sobreviv√™ncia</span>
                    <span class="mode-desc">Sobreviva o m√°ximo</span>
                </button>
                
                <button class="mode-btn" data-mode="maze">
                    <i class="mode-icon fas fa-route"></i>
                    <span>Labirinto</span>
                    <span class="mode-desc">Mapas com desafios</span>
                </button>
            </div>
            
            <h2 class="menu-title">N√≠vel de Dificuldade</h2>
            
            <div class="menu-options">
                <button class="level-btn active" data-level="easy">
                    <i class="level-icon fas fa-child"></i>
                    <span>F√°cil</span>
                    <span class="level-desc">Velocidade baixa, sem obst√°culos</span>
                </button>
                
                <button class="level-btn" data-level="medium">
                    <i class="level-icon fas fa-user"></i>
                    <span>M√©dio</span>
                    <span class="level-desc">Velocidade m√©dia, alguns obst√°culos</span>
                </button>
                
                <button class="level-btn" data-level="hard">
                    <i class="level-icon fas fa-user-graduate"></i>
                    <span>Dif√≠cil</span>
                    <span class="level-desc">Velocidade alta, v√°rios obst√°culos</span>
                </button>
                
                <button class="level-btn" data-level="extreme">
                    <i class="level-icon fas fa-skull"></i>
                    <span>Extremo</span>
                    <span class="level-desc">Velocidade extrema, desafio m√°ximo</span>
                </button>
            </div>
            
            <h2 class="menu-title">Apar√™ncia da Cobra</h2>
            
            <div class="skin-options">
                <button class="skin-btn active" data-skin="neon">
                    <i class="skin-icon fas fa-bolt"></i>
                    <span>Neon</span>
                </button>
                
                <button class="skin-btn" data-skin="retro">
                    <i class="skin-icon fas fa-square"></i>
                    <span>Retr√¥</span>
                </button>
                
                <button class="skin-btn" data-skin="rainbow">
                    <i class="skin-icon fas fa-rainbow"></i>
                    <span>Arco-√çris</span>
                </button>
                
                <button class="skin-btn" data-skin="fire">
                    <i class="skin-icon fas fa-fire"></i>
                    <span>Fogo</span>
                </button>
                
                <button class="skin-btn" data-skin="ghost">
                    <i class="skin-icon fas fa-ghost"></i>
                    <span>Fantasma</span>
                </button>
            </div>
            
            <button class="start-btn" id="start-game-btn">
                <i class="fas fa-play"></i> Iniciar Jogo
            </button>
            
            <div style="display: flex; gap: 1rem; justify-content: center; margin-top: 1rem;">
                <button class="back-btn" id="show-scores-btn">
                    <i class="fas fa-trophy"></i> Pontua√ß√µes
                </button>
                
                <button class="back-btn" id="show-instructions-btn">
                    <i class="fas fa-question-circle"></i> Instru√ß√µes
                </button>
            </div>
        </div>
        
        <!-- √Årea de Jogo -->
        <div class="game-container" id="game-area">
            <div class="game-header">
                <div class="game-info">
                    <div class="info-box">
                        <span class="info-label">Pontua√ß√£o</span>
                        <span class="info-value" id="score-value">0</span>
                    </div>
                    
                    <div class="info-box">
                        <span class="info-label">Tamanho</span>
                        <span class="info-value" id="size-value">3</span>
                    </div>
                    
                    <div class="info-box">
                        <span class="info-label">Tempo</span>
                        <span class="info-value" id="time-value">00:00</span>
                    </div>
                </div>
                
                <div class="game-controls">
                    <button class="control-btn" id="pause-btn" title="Pausar Jogo">
                        <i class="fas fa-pause"></i>
                    </button>
                    
                    <button class="control-btn" id="restart-btn" title="Reiniciar Jogo">
                        <i class="fas fa-redo-alt"></i>
                    </button>
                    
                    <button class="control-btn" id="exit-btn" title="Sair do Jogo">
                        <i class="fas fa-door-open"></i>
                    </button>
                </div>
            </div>
            
            <div id="game-board">
                <div class="snake-grid" id="snake-grid"></div>
                <div class="power-up-status" id="power-up-status">Invencibilidade: 5s</div>
            </div>
            
            <div class="progress-container" id="progress-container">
                <div class="progress-bar" id="progress-bar"></div>
            </div>
            
            <div class="mobile-controls" id="mobile-controls">
                <div class="direction-pad">
                    <button class="direction-btn" id="up-btn">
                        <i class="fas fa-chevron-up"></i>
                    </button>
                    <button class="direction-btn" id="left-btn">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <div class="empty"></div>
                    <button class="direction-btn" id="right-btn">
                        <i class="fas fa-chevron-right"></i>
                    </button>
                    <button class="direction-btn" id="down-btn">
                        <i class="fas fa-chevron-down"></i>
                    </button>
                </div>
            </div>
        </div>
        
        <!-- High Scores -->
        <div class="high-scores" id="high-scores">
            <h2 class="scores-title">Melhores Pontua√ß√µes</h2>
            
            <div class="scores-list">
                <div class="scores-header">
                    <div>#</div>
                    <div>Modo</div>
                    <div>Pontos</div>
                    <div>Tamanho</div>
                    <div>Tempo</div>
                </div>
                
                <div id="scores-container">
                    <!-- High scores will be generated here -->
                </div>
            </div>
            
            <button class="back-btn" id="back-to-menu-btn">
                <i class="fas fa-arrow-left"></i> Voltar ao Menu
            </button>
        </div>
        
        <!-- Instru√ß√µes -->
        <div class="instructions" id="instructions">
            <h2 class="instructions-title">Como Jogar</h2>
            
            <div class="instructions-content">
                <div class="instructions-section">
                    <h3>Controles</h3>
                    <p>Use as teclas de seta ou WASD para mover a cobra. Em dispositivos m√≥veis, use os bot√µes direcionais na tela.</p>
                    
                    <div class="key-controls">
                        <div class="key">W</div>
                        <div class="key">A</div>
                        <div class="key">S</div>
                        <div class="key">D</div>
                    </div>
                    
                    <div class="key-controls">
                        <div class="key">‚Üë</div>
                        <div class="key">‚Üê</div>
                        <div class="key">‚Üì</div>
                        <div class="key">‚Üí</div>
                    </div>
                </div>
                
                <div class="instructions-section">
                    <h3>Itens do Jogo</h3>
                    <p>Durante o jogo, voc√™ encontrar√° diversos itens:</p>
                    
                    <div class="item-list">
                        <div class="item-box">
                            <div class="item-icon food"></div>
                            <div>Comida - Aumenta tamanho e pontua√ß√£o</div>
                        </div>
                        
                        <div class="item-box">
                            <div class="item-icon special-food"></div>
                            <div>Comida Especial - Pontos extras</div>
                        </div>
                        
                        <div class="item-box">
                            <div class="item-icon power-up"></div>
                            <div>Power-Up - Habilidades tempor√°rias</div>
                        </div>
                        
                        <div class="item-box">
                            <div class="item-icon obstacle"></div>
                            <div>Obst√°culo - Evite colis√µes</div>
                        </div>
                        
                        <div class="item-box">
                            <div class="item-icon portal"></div>
                            <div>Portal - Teletransporte</div>
                        </div>
                    </div>
                </div>
                
                <div class="instructions-section">
                    <h3>Modos de Jogo</h3>
                    <ul>
                        <li><strong>Cl√°ssico:</strong> Cres√ßa o m√°ximo poss√≠vel sem colidir</li>
                        <li><strong>Contra o Tempo:</strong> Colete alimentos o mais r√°pido poss√≠vel</li>
                        <li><strong>Sobreviv√™ncia:</strong> Dure o m√°ximo poss√≠vel em alta velocidade</li>
                        <li><strong>Labirinto:</strong> Navegue por mapas com obst√°culos fixos</li>
                    </ul>
                </div>
                
                <div class="instructions-section">
                    <h3>Dicas</h3>
                    <ul>
                        <li>Planeje seus movimentos com anteced√™ncia</li>
                        <li>Use os portais para escapar de situa√ß√µes dif√≠ceis</li>
                        <li>Power-ups podem ajudar em momentos cr√≠ticos</li>
                        <li>Tenha cuidado com obst√°culos m√≥veis em n√≠veis dif√≠ceis</li>
                    </ul>
                </div>
            </div>
            
            <button class="back-btn" id="instructions-back-btn">
                <i class="fas fa-arrow-left"></i> Voltar ao Menu
            </button>
        </div>
        
        <!-- Game Over -->
        <div class="result-screen" id="game-over">
            <div class="result-box">
                <h2 class="result-title">Game Over!</h2>
                
                <div class="stats-container">
                    <div class="stat-box">
                        <span class="stat-label">Pontua√ß√£o</span>
                        <span class="stat-value" id="final-score">0</span>
                    </div>
                    
                    <div class="stat-box">
                        <span class="stat-label">Tamanho</span>
                        <span class="stat-value" id="final-size">3</span>
                    </div>
                    
                    <div class="stat-box">
                        <span class="stat-label">Tempo</span>
                        <span class="stat-value" id="final-time">00:00</span>
                    </div>
                    
                    <div class="stat-box">
                        <span class="stat-label">Modo</span>
                        <span class="stat-value" id="final-mode">Cl√°ssico</span>
                    </div>
                </div>
                
                <div class="result-btns">
                    <button class="result-btn" id="retry-btn">
                        <i class="fas fa-redo-alt"></i> Tentar Novamente
                    </button>
                    
                    <button class="result-btn" id="menu-btn">
                        <i class="fas fa-home"></i> Menu Principal
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Level Complete -->
        <div class="result-screen" id="level-complete">
            <div class="result-box">
                <h2 class="result-title">N√≠vel Conclu√≠do!</h2>
                
                <div class="star-rating">
                    <i class="star fas fa-star" id="star1"></i>
                    <i class="star fas fa-star" id="star2"></i>
                    <i class="star fas fa-star" id="star3"></i>
                </div>
                
                <div class="stats-container">
                    <div class="stat-box">
                        <span class="stat-label">Pontua√ß√£o</span>
                        <span class="stat-value" id="complete-score">0</span>
                    </div>
                    
                    <div class="stat-box">
                        <span class="stat-label">Tamanho</span>
                        <span class="stat-value" id="complete-size">3</span>
                    </div>
                    
                    <div class="stat-box">
                        <span class="stat-label">Tempo</span>
                        <span class="stat-value" id="complete-time">00:00</span>
                    </div>
                    
                    <div class="stat-box">
                        <span class="stat-label">B√¥nus</span>
                        <span class="stat-value" id="complete-bonus">0</span>
                    </div>
                </div>
                
                <div class="result-btns">
                    <button class="result-btn" id="next-level-btn">
                        <i class="fas fa-arrow-right"></i> Pr√≥ximo N√≠vel
                    </button>
                    
                    <button class="result-btn" id="replay-btn">
                        <i class="fas fa-redo-alt"></i> Jogar Novamente
                    </button>
                    
                    <button class="result-btn" id="complete-menu-btn">
                        <i class="fas fa-home"></i> Menu Principal
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Pause Screen -->
        <div class="pause-screen" id="pause-screen">
            <div class="pause-box">
                <h2 class="pause-title">Jogo Pausado</h2>
                
                <div class="pause-btns">
                    <button class="pause-btn" id="resume-btn">
                        <i class="fas fa-play"></i> Continuar Jogo
                    </button>
                    
                    <button class="pause-btn" id="pause-restart-btn">
                        <i class="fas fa-redo-alt"></i> Reiniciar Jogo
                    </button>
                    
                    <button class="pause-btn" id="pause-exit-btn">
                        <i class="fas fa-door-open"></i> Sair do Jogo
                    </button>
                </div>
            </div>
        </div>
    </main>
    
    <footer>
        <p class="signature">MKalil &copy; 2025</p>
    </footer>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
        // Three.js setup para efeito de fundo futurista
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        
        const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(window.devicePixelRatio);
        document.getElementById('canvas-container').appendChild(renderer.domElement);
        
        // Part√≠culas
        const particlesGeometry = new THREE.BufferGeometry();
        const particlesCount = 1000;
        
        const posArray = new Float32Array(particlesCount * 3);
        const colorsArray = new Float32Array(particlesCount * 3);
        
        for(let i = 0; i < particlesCount * 3; i++) {
            // Posi√ß√£o
            posArray[i] = (Math.random() - 0.5) * 15;
            
            // Cores - gradiente do azul ao rosa
            if (i % 3 === 0) { // R
                colorsArray[i] = Math.random() * 0.3;
            } else if (i % 3 === 1) { // G
                colorsArray[i] = Math.random() * 0.5;
            } else { // B
                colorsArray[i] = Math.random() * 0.5 + 0.5;
            }
        }
        
        particlesGeometry.setAttribute('position', new THREE.BufferAttribute(posArray, 3));
        particlesGeometry.setAttribute('color', new THREE.BufferAttribute(colorsArray, 3));
        
        const particlesMaterial = new THREE.PointsMaterial({
            size: 0.02,
            transparent: true,
            opacity: 0.8,
            vertexColors: true,
            blending: THREE.AdditiveBlending
        });
        
        const particlesMesh = new THREE.Points(particlesGeometry, particlesMaterial);
        scene.add(particlesMesh);
        
        // Grade de linhas
        const gridHelper = new THREE.GridHelper(20, 20, 0x00f3ff, 0xf700ff);
        gridHelper.position.y = -3;
        scene.add(gridHelper);
        
        // Posi√ß√£o da c√¢mera
        camera.position.z = 6;
        camera.position.y = 0.5;
        camera.rotation.x = -0.2;
        
        // Luzes
        const pointLight1 = new THREE.PointLight(0x00f3ff, 1);
        pointLight1.position.set(5, 5, 5);
        scene.add(pointLight1);
        
        const pointLight2 = new THREE.PointLight(0xf700ff, 1);
        pointLight2.position.set(-5, -5, 5);
        scene.add(pointLight2);
        
        // Mouse tracking para interatividade
        let mouseX = 0;
        let mouseY = 0;
        
        document.addEventListener('mousemove', (event) => {
            mouseX = (event.clientX / window.innerWidth) * 2 - 1;
            mouseY = -(event.clientY / window.innerHeight) * 2 + 1;
        });
        
        // Fun√ß√£o de anima√ß√£o
        function animate() {
            requestAnimationFrame(animate);
            
            // Rota√ß√£o suave da grade baseada na posi√ß√£o do mouse
            gridHelper.rotation.y += 0.002;
            
            // Movimento das part√≠culas
            particlesMesh.rotation.y += 0.001;
            particlesMesh.rotation.x = mouseY * 0.05;
            particlesMesh.rotation.z = mouseX * 0.05;
            
            // Camera follow suave
            camera.position.x += (mouseX * 0.5 - camera.position.x) * 0.05;
            camera.position.y += (mouseY * 0.2 - camera.position.y) * 0.05;
            
            renderer.render(scene, camera);
        }
        
        animate();
        
        // Redimensionar canvas quando a janela √© redimensionada
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });
        
        
        // ========== JOGO SNAKE (COBRINHA) - L√ìGICA ==========
        
        // Elementos do DOM
        const mainMenu = document.getElementById('main-menu');
        const gameArea = document.getElementById('game-area');
        const highScores = document.getElementById('high-scores');
        const instructions = document.getElementById('instructions');
        const gameBoard = document.getElementById('game-board');
        const snakeGrid = document.getElementById('snake-grid');
        const powerUpStatus = document.getElementById('power-up-status');
        const mobileControls = document.getElementById('mobile-controls');
        const gameOver = document.getElementById('game-over');
        const levelComplete = document.getElementById('level-complete');
        const pauseScreen = document.getElementById('pause-screen');
        const progressContainer = document.getElementById('progress-container');
        const progressBar = document.getElementById('progress-bar');
        
        // Informa√ß√µes do jogo
        const scoreValue = document.getElementById('score-value');
        const sizeValue = document.getElementById('size-value');
        const timeValue = document.getElementById('time-value');
        
        // Resultados
        const finalScore = document.getElementById('final-score');
        const finalSize = document.getElementById('final-size');
        const finalTime = document.getElementById('final-time');
        const finalMode = document.getElementById('final-mode');
        const completeScore = document.getElementById('complete-score');
        const completeSize = document.getElementById('complete-size');
        const completeTime = document.getElementById('complete-time');
        const completeBonus = document.getElementById('complete-bonus');
        const star1 = document.getElementById('star1');
        const star2 = document.getElementById('star2');
        const star3 = document.getElementById('star3');
        
        // Bot√µes
        const levelButtons = document.querySelectorAll('.level-btn');
        const modeButtons = document.querySelectorAll('.mode-btn');
        const skinButtons = document.querySelectorAll('.skin-btn');
        const startGameBtn = document.getElementById('start-game-btn');
        const showScoresBtn = document.getElementById('show-scores-btn');
        const showInstructionsBtn = document.getElementById('show-instructions-btn');
        const backToMenuBtn = document.getElementById('back-to-menu-btn');
        const instructionsBackBtn = document.getElementById('instructions-back-btn');
        const pauseBtn = document.getElementById('pause-btn');
        const restartBtn = document.getElementById('restart-btn');
        const exitBtn = document.getElementById('exit-btn');
        const retryBtn = document.getElementById('retry-btn');
        const menuBtn = document.getElementById('menu-btn');
        const nextLevelBtn = document.getElementById('next-level-btn');
        const replayBtn = document.getElementById('replay-btn');
        const completeMenuBtn = document.getElementById('complete-menu-btn');
        const resumeBtn = document.getElementById('resume-btn');
        const pauseRestartBtn = document.getElementById('pause-restart-btn');
        const pauseExitBtn = document.getElementById('pause-exit-btn');
        
        // Controles de dire√ß√£o (mobile)
        const upBtn = document.getElementById('up-btn');
        const downBtn = document.getElementById('down-btn');
        const leftBtn = document.getElementById('left-btn');
        const rightBtn = document.getElementById('right-btn');
        
        // Configura√ß√µes do jogo
        const gameConfig = {
            easy: {
                speed: 150,
                obstacleCount: 0,
                portalCount: 0,
                specialFoodChance: 0.1,
                powerUpChance: 0.05,
                movingObstacles: false,
                challengeTime: 120
            },
            medium: {
                speed: 120,
                obstacleCount: 5,
                portalCount: 0,
                specialFoodChance: 0.15,
                powerUpChance: 0.1,
                movingObstacles: false,
                challengeTime: 90
            },
            hard: {
                speed: 90,
                obstacleCount: 10,
                portalCount: 2,
                specialFoodChance: 0.2,
                powerUpChance: 0.15,
                movingObstacles: true,
                challengeTime: 60
            },
            extreme: {
                speed: 60,
                obstacleCount: 15,
                portalCount: 4,
                specialFoodChance: 0.25,
                powerUpChance: 0.2,
                movingObstacles: true,
                challengeTime: 45
            }
        };
        
        // Mapas de labirinto
        const mazeLayouts = [
            [
                "####################",
                "#                  #",
                "#  ####      ####  #",
                "#  #              # #",
                "#  #  ##########  # #",
                "#  #  #        #  # #",
                "#  #  #  ####  #  # #",
                "#  #  #  #  #  #  # #",
                "#  #  #  #  #  #  # #",
                "#     #  ####     # #",
                "#     #           # #",
                "#     ##############",
                "#                   #",
                "####################"
            ],
            [
                "####################",
                "#                  #",
                "# ### ############ #",
                "# #                #",
                "# # ############## #",
                "# #                #",
                "# # ############## #",
                "#                # #",
                "############### ## #",
                "#                  #",
                "# ##################",
                "#                  #",
                "#                  #",
                "####################"
            ],
            [
                "####################",
                "#        #         #",
                "# ###### # ####### #",
                "# #      #       # #",
                "# # ############ # #",
                "# #              # #",
                "# ################ #",
                "#                  #",
                "# ################ #",
                "# #                #",
                "# # ############## #",
                "# #                #",
                "#   ################",
                "####################"
            ]
        ];
        
        // Estado do jogo
        let gameState = {
            level: 'easy',
            mode: 'classic',
            skin: 'neon',
            snake: [],
            direction: 'right',
            nextDirection: 'right',
            food: null,
            specialFood: null,
            powerUp: null,
            obstacles: [],
            portals: [],
            movingObstacles: [],
            score: 0,
            time: 0,
            gameInterval: null,
            timeInterval: null,
            gridSize: 20,
            cellSize: 0,
            paused: false,
            gameActive: false,
            invincible: false,
            speedBoost: false,
            scores: [],
            powerUpTimer: null,
            targetFood: 0,
            currentMaze: 0,
            portalCooldown: false
        };
        
        // Inicializa√ß√£o
        function init() {
            loadGameData();
            bindEvents();
            checkMobileDevice();
        }
        
        // Verificar se √© dispositivo m√≥vel
        function checkMobileDevice() {
            if (window.innerWidth <= 768 || 'ontouchstart' in window) {
                mobileControls.style.display = 'block';
            } else {
                mobileControls.style.display = 'none';
            }
        }
        
        // Carregar dados salvos
        function loadGameData() {
            const savedScores = localStorage.getItem('snake_scores');
            
            if (savedScores) {
                gameState.scores = JSON.parse(savedScores);
            }
            
            updateScoresDisplay();
        }
        
        // Salvar dados do jogo
        function saveGameData() {
            localStorage.setItem('snake_scores', JSON.stringify(gameState.scores));
        }
        
        // Eventos de clique
        function bindEvents() {
            // Navega√ß√£o
            levelButtons.forEach(btn => {
                btn.addEventListener('click', () => {
                    levelButtons.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    gameState.level = btn.dataset.level;
                });
            });
            
            modeButtons.forEach(btn => {
                btn.addEventListener('click', () => {
                    modeButtons.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    gameState.mode = btn.dataset.mode;
                });
            });
            
            skinButtons.forEach(btn => {
                btn.addEventListener('click', () => {
                    skinButtons.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    gameState.skin = btn.dataset.skin;
                });
            });
            
            startGameBtn.addEventListener('click', startGame);
            showScoresBtn.addEventListener('click', showHighScores);
            showInstructionsBtn.addEventListener('click', showInstructions);
            backToMenuBtn.addEventListener('click', showMainMenu);
            instructionsBackBtn.addEventListener('click', showMainMenu);
            
            // Controles do jogo
            pauseBtn.addEventListener('click', togglePause);
            restartBtn.addEventListener('click', restartGame);
            exitBtn.addEventListener('click', exitGame);
            
            // Resultados
            retryBtn.addEventListener('click', restartGame);
            menuBtn.addEventListener('click', showMainMenu);
            nextLevelBtn.addEventListener('click', nextLevel);
            replayBtn.addEventListener('click', restartGame);
            completeMenuBtn.addEventListener('click', showMainMenu);
            
            // Pausa
            resumeBtn.addEventListener('click', resumeGame);
            pauseRestartBtn.addEventListener('click', restartGame);
            pauseExitBtn.addEventListener('click', exitGame);
            
            // Controles de dire√ß√£o (mobile)
            upBtn.addEventListener('click', () => {
                if (gameState.direction !== 'down') {
                    gameState.nextDirection = 'up';
                }
            });
            
            downBtn.addEventListener('click', () => {
                if (gameState.direction !== 'up') {
                    gameState.nextDirection = 'down';
                }
            });
            
            leftBtn.addEventListener('click', () => {
                if (gameState.direction !== 'right') {
                    gameState.nextDirection = 'left';
                }
            });
            
            rightBtn.addEventListener('click', () => {
                if (gameState.direction !== 'left') {
                    gameState.nextDirection = 'right';
                }
            });
            
            // Controles de teclado
            document.addEventListener('keydown', handleKeyPress);
            
            // Ajustar tela em resize
            window.addEventListener('resize', () => {
                checkMobileDevice();
                if (gameState.gameActive) {
                    adjustGameBoard();
                }
            });
        }
        
        // Lidar com teclas pressionadas
        function handleKeyPress(event) {
            if (!gameState.gameActive || gameState.paused) return;
            
            switch(event.key) {
                case "ArrowUp":
                case "w":
                case "W":
                    if (gameState.direction !== 'down') {
                        gameState.nextDirection = 'up';
                    }
                    break;
                case "ArrowDown":
                case "s":
                case "S":
                    if (gameState.direction !== 'up') {
                        gameState.nextDirection = 'down';
                    }
                    break;
                case "ArrowLeft":
                case "a":
                case "A":
                    if (gameState.direction !== 'right') {
                        gameState.nextDirection = 'left';
                    }
                    break;
                case "ArrowRight":
                case "d":
                case "D":
                    if (gameState.direction !== 'left') {
                        gameState.nextDirection = 'right';
                    }
                    break;
                case "p":
                case "P":
                    togglePause();
                    break;
            }
        }
        
        // Navega√ß√£o entre telas
        function showMainMenu() {
            stopGame();
            hideResultScreens();
            
            gameArea.style.display = 'none';
            highScores.style.display = 'none';
            instructions.style.display = 'none';
            
            mainMenu.style.display = 'block';
            mainMenu.classList.add('fade-in');
        }
        
        function showGameArea() {
            mainMenu.style.display = 'none';
            highScores.style.display = 'none';
            instructions.style.display = 'none';
            
            gameArea.style.display = 'flex';
            gameArea.classList.add('fade-in');
            
            adjustGameBoard();
        }
        
        function showHighScores() {
            mainMenu.style.display = 'none';
            
            updateScoresDisplay();
            
            highScores.style.display = 'block';
            highScores.classList.add('fade-in');
        }
        
        function showInstructions() {
            mainMenu.style.display = 'none';
            
            instructions.style.display = 'block';
            instructions.classList.add('fade-in');
        }
        
        // Atualizar exibi√ß√£o de pontua√ß√µes
        function updateScoresDisplay() {
            const scoresContainer = document.getElementById('scores-container');
            scoresContainer.innerHTML = '';
            
            if (gameState.scores.length === 0) {
                scoresContainer.innerHTML = '<div class="score-item">Nenhuma pontua√ß√£o registrada ainda.</div>';
                return;
            }
            
            // Ordenar por pontua√ß√£o (maior primeiro)
            const sortedScores = [...gameState.scores].sort((a, b) => b.score - a.score);
            
            // Mostrar as 10 melhores
            const topScores = sortedScores.slice(0, 10);
            
            topScores.forEach((score, index) => {
                const scoreItem = document.createElement('div');
                scoreItem.className = 'score-item';
                
                scoreItem.innerHTML = `
                    <div class="score-rank">${index + 1}</div>
                    <div class="score-mode">${getModeName(score.mode)} (${getLevelName(score.level)})</div>
                    <div class="score-score">${score.score}</div>
                    <div class="score-size">${score.size}</div>
                    <div class="score-time">${formatTime(score.time)}</div>
                `;
                
                scoresContainer.appendChild(scoreItem);
            });
        }
        
        function getModeName(mode) {
            const names = {
                'classic': 'Cl√°ssico',
                'time-attack': 'Contra o Tempo',
                'survival': 'Sobreviv√™ncia',
                'maze': 'Labirinto'
            };
            
            return names[mode] || mode;
        }
        
        function getLevelName(level) {
            const names = {
                'easy': 'F√°cil',
                'medium': 'M√©dio',
                'hard': 'Dif√≠cil',
                'extreme': 'Extremo'
            };
            
            return names[level] || level;
        }
        
        // Iniciar jogo
        function startGame() {
            resetGameState();
            showGameArea();
            createGame();
            startGameLoop();
            
            gameState.gameActive = true;
        }
        
        // Resetar estado do jogo
        function resetGameState() {
            // Configura√ß√£o b√°sica
            gameState.snake = [];
            gameState.direction = 'right';
            gameState.nextDirection = 'right';
            gameState.food = null;
            gameState.specialFood = null;
            gameState.powerUp = null;
            gameState.obstacles = [];
            gameState.portals = [];
            gameState.movingObstacles = [];
            gameState.score = 0;
            gameState.time = 0;
            gameState.paused = false;
            gameState.invincible = false;
            gameState.speedBoost = false;
            gameState.portalCooldown = false;
            
            // Limpar timers existentes
            clearInterval(gameState.gameInterval);
            clearInterval(gameState.timeInterval);
            clearTimeout(gameState.powerUpTimer);
            
            // Resetar UI
            scoreValue.textContent = '0';
            timeValue.textContent = '00:00';
            powerUpStatus.classList.remove('active');
            
            // Configura√ß√£o espec√≠fica do modo
            if (gameState.mode === 'time-attack') {
                gameState.targetFood = 15; // Alvo para o modo contra o tempo
                showProgressBar();
                updateProgressBar(0, gameState.targetFood);
            } else if (gameState.mode === 'survival') {
                // Modo de sobreviv√™ncia come√ßa mais dif√≠cil
                const config = gameConfig[gameState.level];
                gameState.speed = config.speed * 0.8; // 20% mais r√°pido
            } else {
                hideProgressBar();
            }
            
            // Tabuleiro limpo
            snakeGrid.innerHTML = '';
        }
        
        // Criar elementos do jogo
        function createGame() {
            // Calcular tamanho da c√©lula
            const boardRect = gameBoard.getBoundingClientRect();
            gameState.cellSize = Math.floor(boardRect.width / gameState.gridSize);
            
            // Criar cobra inicial
            createSnake();
            
            // Criar grid
            createGrid();
            
            // Criar elementos com base no modo e n√≠vel
            if (gameState.mode === 'maze') {
                createMaze();
            } else {
                createObstacles();
                createPortals();
            }
            
            // Criar comida
            createFood();
            
            // Atualizar tamanho da cobra
            sizeValue.textContent = gameState.snake.length;
        }
        
        // Ajustar tabuleiro ao tamanho da tela
        function adjustGameBoard() {
            const boardRect = gameBoard.getBoundingClientRect();
            gameState.cellSize = Math.floor(boardRect.width / gameState.gridSize);
            
            // Atualizar posi√ß√µes de todos os elementos
            updateElements();
        }
        
        // Criar cobra inicial
        function createSnake() {
            // Posi√ß√£o inicial
            const startX = Math.floor(gameState.gridSize / 4);
            const startY = Math.floor(gameState.gridSize / 2);
            
            // Criar segmentos da cobra
            for (let i = 0; i < 3; i++) {
                gameState.snake.push({
                    x: startX - i, 
                    y: startY
                });
            }
            
            // Renderizar cobra
            gameState.snake.forEach((segment, index) => {
                createSnakeSegment(segment, index === 0);
            });
        }
        
        // Criar segmento da cobra
        function createSnakeSegment(segment, isHead) {
            const segmentElement = document.createElement('div');
            segmentElement.className = 'snake-segment';
            
            if (isHead) {
                segmentElement.classList.add('snake-head');
            }
            
            // Aplicar apar√™ncia com base no skin selecionado
            applySnakeSkin(segmentElement, isHead);
            
            // Posicionar segmento
            positionElement(segmentElement, segment.x, segment.y);
            
            snakeGrid.appendChild(segmentElement);
        }
        
        // Aplicar skin √† cobra
        function applySnakeSkin(element, isHead) {
            const elementType = isHead ? 'head' : 'body';
            
            switch (gameState.skin) {
                case 'neon':
                    // Skin padr√£o neon
                    if (isHead) {
                        element.style.backgroundColor = 'var(--snake-head)';
                        element.style.boxShadow = '0 0 12px var(--snake-head)';
                    } else {
                        element.style.backgroundColor = 'var(--snake-body)';
                        element.style.boxShadow = '0 0 8px var(--snake-body)';
                    }
                    element.style.borderRadius = '2px';
                    break;
                    
                case 'retro':
                    // Blocos quadrados sem efeitos
                    element.style.backgroundColor = isHead ? '#00ff00' : '#00dd00';
                    element.style.boxShadow = 'none';
                    element.style.borderRadius = '0';
                    break;
                    
                case 'rainbow':
                    // Cores em gradiente ao longo da cobra
                    const index = Array.from(snakeGrid.children).findIndex(el => el === element);
                    const hue = (index * 20) % 360;
                    element.style.backgroundColor = `hsl(${hue}, 100%, 50%)`;
                    element.style.boxShadow = `0 0 8px hsl(${hue}, 100%, 50%)`;
                    element.style.borderRadius = '4px';
                    break;
                    
                case 'fire':
                    // Efeito de fogo
                    if (isHead) {
                        element.style.backgroundColor = '#ff3300';
                        element.style.boxShadow = '0 0 12px #ff3300';
                    } else {
                        element.style.backgroundColor = '#ff9900';
                        element.style.boxShadow = '0 0 8px #ff9900';
                    }
                    element.style.borderRadius = '5px 5px 2px 2px';
                    break;
                    
                case 'ghost':
                    // Efeito fantasma transparente
                    if (isHead) {
                        element.style.backgroundColor = 'rgba(255, 255, 255, 0.8)';
                        element.style.boxShadow = '0 0 12px rgba(255, 255, 255, 0.8)';
                    } else {
                        element.style.backgroundColor = 'rgba(255, 255, 255, 0.5)';
                        element.style.boxShadow = '0 0 8px rgba(255, 255, 255, 0.5)';
                    }
                    element.style.borderRadius = '8px';
                    break;
            }
            
            // Adicionar anima√ß√£o para power-ups
            if (gameState.invincible) {
                element.style.animation = 'pulse 0.5s infinite alternate';
            } else if (gameState.speedBoost) {
                element.style.animation = 'pulse 1s infinite alternate';
            }
        }
        
        // Criar grid
        function createGrid() {
            // Criar linhas verticais
            for (let x = 1; x < gameState.gridSize; x++) {
                const verticalLine = document.createElement('div');
                verticalLine.className = 'grid-line vertical-line';
                verticalLine.style.left = `${x * gameState.cellSize}px`;
                snakeGrid.appendChild(verticalLine);
            }
            
            // Criar linhas horizontais
            for (let y = 1; y < gameState.gridSize; y++) {
                const horizontalLine = document.createElement('div');
                horizontalLine.className = 'grid-line horizontal-line';
                horizontalLine.style.top = `${y * gameState.cellSize}px`;
                snakeGrid.appendChild(horizontalLine);
            }
        }
        
        // Criar obst√°culos
        function createObstacles() {
            const config = gameConfig[gameState.level];
            const obstacleCount = config.obstacleCount;
            
            // Limpar obst√°culos existentes
            gameState.obstacles = [];
            
            // Criar obst√°culos fixos
            for (let i = 0; i < obstacleCount; i++) {
                createObstacle();
            }
            
            // Criar obst√°culos m√≥veis
            if (config.movingObstacles) {
                const movingCount = Math.floor(obstacleCount / 3);
                
                for (let i = 0; i < movingCount; i++) {
                    createMovingObstacle();
                }
            }
        }
        
        // Criar um √∫nico obst√°culo
        function createObstacle() {
            let x, y;
            let validPosition = false;
            
            // Encontrar posi√ß√£o v√°lida
            while (!validPosition) {
                x = Math.floor(Math.random() * gameState.gridSize);
                y = Math.floor(Math.random() * gameState.gridSize);
                
                validPosition = isValidPosition(x, y);
            }
            
            // Criar elemento de obst√°culo
            const obstacle = { x, y };
            gameState.obstacles.push(obstacle);
            
            const obstacleElement = document.createElement('div');
            obstacleElement.className = 'obstacle';
            positionElement(obstacleElement, x, y);
            
            snakeGrid.appendChild(obstacleElement);
        }
        
        // Criar obst√°culo m√≥vel
        function createMovingObstacle() {
            let x, y;
            let validPosition = false;
            
            // Encontrar posi√ß√£o v√°lida
            while (!validPosition) {
                x = Math.floor(Math.random() * gameState.gridSize);
                y = Math.floor(Math.random() * gameState.gridSize);
                
                validPosition = isValidPosition(x, y);
            }
            
            // Dire√ß√£o aleat√≥ria
            const directions = ['up', 'down', 'left', 'right'];
            const direction = directions[Math.floor(Math.random() * directions.length)];
            
            // Criar elemento de obst√°culo m√≥vel
            const obstacle = { 
                x, 
                y, 
                direction,
                element: document.createElement('div')
            };
            
            obstacle.element.className = 'obstacle';
            obstacle.element.style.backgroundColor = '#ff9900';
            obstacle.element.style.boxShadow = '0 0 12px #ff9900';
            obstacle.element.style.transition = 'left 0.15s linear, top 0.15s linear';
            
            positionElement(obstacle.element, x, y);
            
            gameState.movingObstacles.push(obstacle);
            snakeGrid.appendChild(obstacle.element);
        }
        
        // Criar portais
        function createPortals() {
            const config = gameConfig[gameState.level];
            const portalCount = config.portalCount;
            
            // N√£o criar portais se n√£o houver no n√≠vel
            if (portalCount === 0) return;
            
            // Sempre criar pares de portais
            for (let i = 0; i < portalCount; i += 2) {
                let x1, y1, x2, y2;
                let validPosition1 = false;
                let validPosition2 = false;
                
                // Encontrar posi√ß√£o para primeiro portal
                while (!validPosition1) {
                    x1 = Math.floor(Math.random() * gameState.gridSize);
                    y1 = Math.floor(Math.random() * gameState.gridSize);
                    
                    validPosition1 = isValidPosition(x1, y1);
                }
                
                // Encontrar posi√ß√£o para segundo portal
                while (!validPosition2) {
                    x2 = Math.floor(Math.random() * gameState.gridSize);
                    y2 = Math.floor(Math.random() * gameState.gridSize);
                    
                    validPosition2 = isValidPosition(x2, y2) && (x1 !== x2 || y1 !== y2);
                }
                
                // Criar elementos de portal
                const portal1 = { x: x1, y: y1, pair: { x: x2, y: y2 } };
                const portal2 = { x: x2, y: y2, pair: { x: x1, y: y1 } };
                
                gameState.portals.push(portal1, portal2);
                
                const portalElement1 = document.createElement('div');
                portalElement1.className = 'portal';
                positionElement(portalElement1, x1, y1);
                
                const portalElement2 = document.createElement('div');
                portalElement2.className = 'portal';
                positionElement(portalElement2, x2, y2);
                
                snakeGrid.appendChild(portalElement1);
                snakeGrid.appendChild(portalElement2);
            }
        }
        
        // Criar labirinto
        function createMaze() {
            // Selecionar um labirinto aleat√≥rio
            gameState.currentMaze = Math.floor(Math.random() * mazeLayouts.length);
            const maze = mazeLayouts[gameState.currentMaze];
            
            // Converter layout para obst√°culos
            for (let y = 0; y < maze.length; y++) {
                const row = maze[y];
                for (let x = 0; x < row.length; x++) {
                    if (row[x] === '#') {
                        // Criar obst√°culo
                        const obstacle = { 
                            x: x, 
                            y: y 
                        };
                        
                        gameState.obstacles.push(obstacle);
                        
                        const obstacleElement = document.createElement('div');
                        obstacleElement.className = 'obstacle';
                        positionElement(obstacleElement, x, y);
                        
                        snakeGrid.appendChild(obstacleElementsnakeGrid.appendChild(obstacleElement);
                    }
                }
            }
            
            // Adicionar um par de portais ao labirinto
            createPortals();
        }
        
        // Criar comida
        function createFood() {
            let x, y;
            let validPosition = false;
            
            // Encontrar posi√ß√£o v√°lida
            while (!validPosition) {
                x = Math.floor(Math.random() * gameState.gridSize);
                y = Math.floor(Math.random() * gameState.gridSize);
                
                validPosition = isValidPosition(x, y);
            }
            
            // Determinar se ser√° comida especial
            const config = gameConfig[gameState.level];
            const isSpecial = Math.random() < config.specialFoodChance;
            
            // Criar elemento de comida
            gameState.food = { x, y, special: isSpecial };
            
            const foodElement = document.createElement('div');
            foodElement.className = 'food';
            
            if (isSpecial) {
                foodElement.classList.add('special-food');
            }
            
            positionElement(foodElement, x, y);
            
            snakeGrid.appendChild(foodElement);
        }
        
        // Criar power-up
        function createPowerUp() {
            const config = gameConfig[gameState.level];
            
            // Chance de criar power-up
            if (Math.random() >= config.powerUpChance) return;
            
            let x, y;
            let validPosition = false;
            
            // Encontrar posi√ß√£o v√°lida
            while (!validPosition) {
                x = Math.floor(Math.random() * gameState.gridSize);
                y = Math.floor(Math.random() * gameState.gridSize);
                
                validPosition = isValidPosition(x, y);
            }
            
            // Tipo de power-up (0: invencibilidade, 1: velocidade)
            const type = Math.floor(Math.random() * 2);
            
            // Criar elemento de power-up
            gameState.powerUp = { x, y, type };
            
            const powerUpElement = document.createElement('div');
            powerUpElement.className = 'power-up';
            
            if (type === 0) {
                powerUpElement.style.backgroundColor = '#00ffff';
                powerUpElement.style.boxShadow = '0 0 10px #00ffff';
            } else {
                powerUpElement.style.backgroundColor = '#ffff00';
                powerUpElement.style.boxShadow = '0 0 10px #ffff00';
            }
            
            positionElement(powerUpElement, x, y);
            
            snakeGrid.appendChild(powerUpElement);
        }
        
        // Verificar se posi√ß√£o √© v√°lida (n√£o colide com cobra ou obst√°culos)
        function isValidPosition(x, y) {
            // Verificar se est√° fora do grid
            if (x < 0 || x >= gameState.gridSize || y < 0 || y >= gameState.gridSize) {
                return false;
            }
            
            // Verificar colis√£o com cobra
            for (const segment of gameState.snake) {
                if (segment.x === x && segment.y === y) {
                    return false;
                }
            }
            
            // Verificar colis√£o com obst√°culos
            for (const obstacle of gameState.obstacles) {
                if (obstacle.x === x && obstacle.y === y) {
                    return false;
                }
            }
            
            // Verificar colis√£o com comida existente
            if (gameState.food && gameState.food.x === x && gameState.food.y === y) {
                return false;
            }
            
            // Verificar colis√£o com power-up existente
            if (gameState.powerUp && gameState.powerUp.x === x && gameState.powerUp.y === y) {
                return false;
            }
            
            // Verificar colis√£o com portal
            for (const portal of gameState.portals) {
                if (portal.x === x && portal.y === y) {
                    return false;
                }
            }
            
            return true;
        }
        
        // Posicionar elemento no grid
        function positionElement(element, x, y) {
            element.style.width = `${gameState.cellSize - 2}px`;
            element.style.height = `${gameState.cellSize - 2}px`;
            element.style.left = `${x * gameState.cellSize + 1}px`;
            element.style.top = `${y * gameState.cellSize + 1}px`;
        }
        
        // Atualizar elementos do jogo (ap√≥s redimensionamento)
        function updateElements() {
            // Atualizar cobra
            const snakeElements = document.querySelectorAll('.snake-segment');
            gameState.snake.forEach((segment, index) => {
                if (snakeElements[index]) {
                    positionElement(snakeElements[index], segment.x, segment.y);
                }
            });
            
            // Atualizar comida
            const foodElement = document.querySelector('.food');
            if (foodElement && gameState.food) {
                positionElement(foodElement, gameState.food.x, gameState.food.y);
            }
            
            // Atualizar power-up
            const powerUpElement = document.querySelector('.power-up');
            if (powerUpElement && gameState.powerUp) {
                positionElement(powerUpElement, gameState.powerUp.x, gameState.powerUp.y);
            }
            
            // Atualizar obst√°culos
            const obstacleElements = document.querySelectorAll('.obstacle:not(.moving-obstacle)');
            gameState.obstacles.forEach((obstacle, index) => {
                if (obstacleElements[index]) {
                    positionElement(obstacleElements[index], obstacle.x, obstacle.y);
                }
            });
            
            // Atualizar obst√°culos m√≥veis
            gameState.movingObstacles.forEach(obstacle => {
                positionElement(obstacle.element, obstacle.x, obstacle.y);
            });
            
            // Atualizar portais
            const portalElements = document.querySelectorAll('.portal');
            gameState.portals.forEach((portal, index) => {
                if (portalElements[index]) {
                    positionElement(portalElements[index], portal.x, portal.y);
                }
            });
            
            // Atualizar linhas do grid
            const verticalLines = document.querySelectorAll('.vertical-line');
            const horizontalLines = document.querySelectorAll('.horizontal-line');
            
            verticalLines.forEach((line, index) => {
                line.style.left = `${(index + 1) * gameState.cellSize}px`;
                line.style.height = '100%';
            });
            
            horizontalLines.forEach((line, index) => {
                line.style.top = `${(index + 1) * gameState.cellSize}px`;
                line.style.width = '100%';
            });
        }
        
        // Iniciar loop do jogo
        function startGameLoop() {
            const config = gameConfig[gameState.level];
            let speed = config.speed;
            
            // Ajustar velocidade com base no modo
            if (gameState.mode === 'survival') {
                speed = Math.floor(speed * 0.8); // 20% mais r√°pido
            }
            
            // Iniciar loop principal
            gameState.gameInterval = setInterval(() => {
                if (!gameState.paused) {
                    moveSnake();
                    
                    // Mover obst√°culos m√≥veis
                    if (config.movingObstacles) {
                        moveObstacles();
                    }
                }
            }, speed);
            
            // Iniciar temporizador
            gameState.timeInterval = setInterval(() => {
                if (!gameState.paused) {
                    gameState.time++;
                    timeValue.textContent = formatTime(gameState.time);
                    
                    // Verificar modo contra o tempo
                    if (gameState.mode === 'time-attack') {
                        checkTimeAttackProgress();
                    }
                }
            }, 1000);
        }
        
        // Mover cobra
        function moveSnake() {
            // Atualizar dire√ß√£o
            gameState.direction = gameState.nextDirection;
            
            // Calcular nova posi√ß√£o da cabe√ßa
            const head = { ...gameState.snake[0] }; // Copiar cabe√ßa atual
            
            // Mover com base na dire√ß√£o
            switch (gameState.direction) {
                case 'up':
                    head.y--;
                    break;
                case 'down':
                    head.y++;
                    break;
                case 'left':
                    head.x--;
                    break;
                case 'right':
                    head.x++;
                    break;
            }
            
            // Verificar portais
            const portal = checkPortal(head.x, head.y);
            if (portal && !gameState.portalCooldown) {
                // Teletransportar para o portal par
                head.x = portal.pair.x;
                head.y = portal.pair.y;
                
                // Cooldown para evitar loops de teletransporte
                gameState.portalCooldown = true;
                setTimeout(() => {
                    gameState.portalCooldown = false;
                }, 500);
            }
            
            // Verificar travessia de bordas (modo cl√°ssico)
            if (gameState.mode === 'classic' || gameState.mode === 'time-attack') {
                if (head.x < 0) head.x = gameState.gridSize - 1;
                if (head.x >= gameState.gridSize) head.x = 0;
                if (head.y < 0) head.y = gameState.gridSize - 1;
                if (head.y >= gameState.gridSize) head.y = 0;
            }
            
            // Verificar colis√£o
            if (checkCollision(head.x, head.y)) {
                if (gameState.invincible) {
                    // Ignorar colis√£o se invenc√≠vel
                } else {
                    gameOver();
                    return;
                }
            }
            
            // Verificar comida
            const ateFood = checkFood(head.x, head.y);
            
            // Verificar power-up
            checkPowerUp(head.x, head.y);
            
            // Adicionar nova cabe√ßa
            gameState.snake.unshift(head);
            
            // Renderizar nova cabe√ßa
            const headElement = document.createElement('div');
            headElement.className = 'snake-segment snake-head';
            applySnakeSkin(headElement, true);
            positionElement(headElement, head.x, head.y);
            
            // Inserir antes do primeiro elemento para manter ordem correta
            if (snakeGrid.children.length > 0) {
                snakeGrid.insertBefore(headElement, snakeGrid.children[0]);
            } else {
                snakeGrid.appendChild(headElement);
            }
            
            // Atualizar antiga cabe√ßa para corpo
            const segments = document.querySelectorAll('.snake-segment');
            if (segments.length > 1) {
                segments[1].classList.remove('snake-head');
                applySnakeSkin(segments[1], false);
            }
            
            // Remover cauda se n√£o comeu
            if (!ateFood) {
                gameState.snake.pop();
                
                // Remover √∫ltimo elemento do DOM
                const lastSegment = segments[segments.length - 1];
                if (lastSegment) {
                    lastSegment.remove();
                }
            }
            
            // Atualizar tamanho
            sizeValue.textContent = gameState.snake.length;
        }
        
        // Mover obst√°culos
        function moveObstacles() {
            gameState.movingObstacles.forEach(obstacle => {
                // Salvar posi√ß√£o anterior
                const prevX = obstacle.x;
                const prevY = obstacle.y;
                
                // Mover com base na dire√ß√£o
                switch (obstacle.direction) {
                    case 'up':
                        obstacle.y--;
                        break;
                    case 'down':
                        obstacle.y++;
                        break;
                    case 'left':
                        obstacle.x--;
                        break;
                    case 'right':
                        obstacle.x++;
                        break;
                }
                
                // Verificar limites e mudar dire√ß√£o se necess√°rio
                if (obstacle.x < 0 || obstacle.x >= gameState.gridSize ||
                    obstacle.y < 0 || obstacle.y >= gameState.gridSize) {
                    // Inverter dire√ß√£o
                    switch (obstacle.direction) {
                        case 'up': obstacle.direction = 'down'; obstacle.y = prevY + 1; break;
                        case 'down': obstacle.direction = 'up'; obstacle.y = prevY - 1; break;
                        case 'left': obstacle.direction = 'right'; obstacle.x = prevX + 1; break;
                        case 'right': obstacle.direction = 'left'; obstacle.x = prevX - 1; break;
                    }
                }
                
                // Atualizar posi√ß√£o visual
                positionElement(obstacle.element, obstacle.x, obstacle.y);
            });
        }
        
        // Verificar colis√£o
        function checkCollision(x, y) {
            // Verificar limites do tabuleiro (em modos com bordas s√≥lidas)
            if (gameState.mode === 'survival' || gameState.mode === 'maze') {
                if (x < 0 || x >= gameState.gridSize || y < 0 || y >= gameState.gridSize) {
                    return true;
                }
            }
            
            // Verificar colis√£o com corpo da cobra
            for (let i = 1; i < gameState.snake.length; i++) {
                if (gameState.snake[i].x === x && gameState.snake[i].y === y) {
                    return true;
                }
            }
            
            // Verificar colis√£o com obst√°culos
            for (const obstacle of gameState.obstacles) {
                if (obstacle.x === x && obstacle.y === y) {
                    return true;
                }
            }
            
            // Verificar colis√£o com obst√°culos m√≥veis
            for (const obstacle of gameState.movingObstacles) {
                if (obstacle.x === x && obstacle.y === y) {
                    return true;
                }
            }
            
            return false;
        }
        
        // Verificar comida
        function checkFood(x, y) {
            if (gameState.food && gameState.food.x === x && gameState.food.y === y) {
                // Remover comida visual
                const foodElement = document.querySelector('.food');
                if (foodElement) {
                    foodElement.remove();
                }
                
                // Aumentar pontua√ß√£o
                const points = gameState.food.special ? 30 : 10;
                gameState.score += points;
                scoreValue.textContent = gameState.score;
                
                // Atualizar progresso no modo contra o tempo
                if (gameState.mode === 'time-attack') {
                    updateProgressBar(gameState.score / 10, gameState.targetFood);
                    
                    // Verificar conclus√£o do n√≠vel
                    if (gameState.score / 10 >= gameState.targetFood) {
                        completeLevel();
                        return true;
                    }
                }
                
                // Criar nova comida
                createFood();
                
                // Chance de criar power-up
                if (!gameState.powerUp) {
                    createPowerUp();
                }
                
                // Indicar que comeu
                return true;
            }
            
            return false;
        }
        
        // Verificar power-up
        function checkPowerUp(x, y) {
            if (gameState.powerUp && gameState.powerUp.x === x && gameState.powerUp.y === y) {
                // Remover power-up visual
                const powerUpElement = document.querySelector('.power-up');
                if (powerUpElement) {
                    powerUpElement.remove();
                }
                
                // Aplicar efeito baseado no tipo
                const powerUpType = gameState.powerUp.type;
                
                if (powerUpType === 0) {
                    // Invencibilidade
                    applyInvincibility();
                } else {
                    // Boost de velocidade
                    applySpeedBoost();
                }
                
                // Limpar power-up do estado
                gameState.powerUp = null;
            }
        }
        
        // Verificar portal
        function checkPortal(x, y) {
            for (const portal of gameState.portals) {
                if (portal.x === x && portal.y === y) {
                    return portal;
                }
            }
            return null;
        }
        
        // Aplicar invencibilidade
        function applyInvincibility() {
            gameState.invincible = true;
            
            // Atualizar visual da cobra
            const segments = document.querySelectorAll('.snake-segment');
            segments.forEach(segment => {
                segment.style.animation = 'pulse 0.5s infinite alternate';
            });
            
            // Mostrar status
            showPowerUpStatus('Invencibilidade', 5);
            
            // Remover ap√≥s 5 segundos
            clearTimeout(gameState.powerUpTimer);
            gameState.powerUpTimer = setTimeout(() => {
                gameState.invincible = false;
                
                // Restaurar visual
                const segments = document.querySelectorAll('.snake-segment');
                segments.forEach(segment => {
                    segment.style.animation = '';
                });
                
                // Esconder status
                hidePowerUpStatus();
            }, 5000);
        }
        
        // Aplicar boost de velocidade
        function applySpeedBoost() {
            if (gameState.speedBoost) return; // J√° est√° ativo
            
            gameState.speedBoost = true;
            
            // Atualizar visual da cobra
            const segments = document.querySelectorAll('.snake-segment');
            segments.forEach(segment => {
                segment.style.animation = 'pulse 1s infinite alternate';
            });
            
            // Mostrar status
            showPowerUpStatus('Velocidade', 7);
            
            // Aumentar velocidade
            clearInterval(gameState.gameInterval);
            
            const config = gameConfig[gameState.level];
            const newSpeed = Math.floor(config.speed * 0.6); // 40% mais r√°pido
            
            gameState.gameInterval = setInterval(() => {
                if (!gameState.paused) {
                    moveSnake();
                    
                    // Mover obst√°culos m√≥veis
                    if (config.movingObstacles) {
                        moveObstacles();
                    }
                }
            }, newSpeed);
            
            // Remover ap√≥s 7 segundos
            clearTimeout(gameState.powerUpTimer);
            gameState.powerUpTimer = setTimeout(() => {
                gameState.speedBoost = false;
                
                // Restaurar visual
                const segments = document.querySelectorAll('.snake-segment');
                segments.forEach(segment => {
                    segment.style.animation = '';
                });
                
                // Restaurar velocidade
                clearInterval(gameState.gameInterval);
                
                gameState.gameInterval = setInterval(() => {
                    if (!gameState.paused) {
                        moveSnake();
                        
                        // Mover obst√°culos m√≥veis
                        if (config.movingObstacles) {
                            moveObstacles();
                        }
                    }
                }, config.speed);
                
                // Esconder status
                hidePowerUpStatus();
            }, 7000);
        }
        
        // Mostrar status de power-up
        function showPowerUpStatus(type, seconds) {
            powerUpStatus.textContent = `${type}: ${seconds}s`;
            powerUpStatus.classList.add('active');
            
            // Atualizar contador a cada segundo
            const countInterval = setInterval(() => {
                seconds--;
                if (seconds > 0) {
                    powerUpStatus.textContent = `${type}: ${seconds}s`;
                } else {
                    clearInterval(countInterval);
                }
            }, 1000);
        }
        
        // Esconder status de power-up
        function hidePowerUpStatus() {
            powerUpStatus.classList.remove('active');
        }
        
        // Verificar progresso no modo contra o tempo
        function checkTimeAttackProgress() {
            const config = gameConfig[gameState.level];
            
            // Verificar se o tempo acabou
            if (gameState.time >= config.challengeTime) {
                gameOver();
            }
        }
        
        // Mostrar/esconder barra de progresso
        function showProgressBar() {
            progressContainer.style.display = 'block';
        }
        
        function hideProgressBar() {
            progressContainer.style.display = 'none';
        }
        
        // Atualizar barra de progresso
        function updateProgressBar(current, target) {
            const percentage = Math.min(100, (current / target) * 100);
            progressBar.style.width = `${percentage}%`;
        }
        
        // Pausar/resumir jogo
        function togglePause() {
            gameState.paused = !gameState.paused;
            
            if (gameState.paused) {
                pauseScreen.style.display = 'flex';
            } else {
                pauseScreen.style.display = 'none';
            }
        }
        
        // Resumir jogo (a partir da tela de pausa)
        function resumeGame() {
            gameState.paused = false;
            pauseScreen.style.display = 'none';
        }
        
        // Reiniciar jogo
        function restartGame() {
            stopGame();
            hideResultScreens();
            resetGameState();
            createGame();
            startGameLoop();
            
            gameState.gameActive = true;
        }
        
        // Sair do jogo
        function exitGame() {
            stopGame();
            hideResultScreens();
            showMainMenu();
        }
        
        // Parar jogo
        function stopGame() {
            clearInterval(gameState.gameInterval);
            clearInterval(gameState.timeInterval);
            clearTimeout(gameState.powerUpTimer);
            
            gameState.gameActive = false;
        }
        
        // Esconder telas de resultado
        function hideResultScreens() {
            gameOver.style.display = 'none';
            levelComplete.style.display = 'none';
            pauseScreen.style.display = 'none';
        }
        
        // Game over
        function gameOver() {
            stopGame();
            
            // Calcular pontua√ß√£o final
            const finalScoreValue = gameState.score;
            const finalSizeValue = gameState.snake.length;
            const finalTimeValue = gameState.time;
            
            // Atualizar UI
            finalScore.textContent = finalScoreValue;
            finalSize.textContent = finalSizeValue;
            finalTime.textContent = formatTime(finalTimeValue);
            finalMode.textContent = `${getModeName(gameState.mode)} (${getLevelName(gameState.level)})`;
            
            // Salvar pontua√ß√£o
            gameState.scores.push({
                mode: gameState.mode,
                level: gameState.level,
                score: finalScoreValue,
                size: finalSizeValue,
                time: finalTimeValue,
                date: new Date().toISOString()
            });
            
            // Limitar a 100 pontua√ß√µes
            if (gameState.scores.length > 100) {
                gameState.scores = gameState.scores.slice(-100);
            }
            
            saveGameData();
            
            // Mostrar tela de game over
            gameOver.style.display = 'flex';
        }
        
        // Completar n√≠vel (para modo contra o tempo)
        function completeLevel() {
            stopGame();
            
            // Calcular pontua√ß√£o e b√¥nus
            const score = gameState.score;
            const size = gameState.snake.length;
            const time = gameState.time;
            
            const config = gameConfig[gameState.level];
            const timeBonus = Math.max(0, config.challengeTime - time) * 2;
            const totalScore = score + timeBonus;
            
            // Calcular estrelas
            let stars = 1;
            
            if (time < config.challengeTime * 0.5) {
                stars = 3; // Muito r√°pido
            } else if (time < config.challengeTime * 0.75) {
                stars = 2; // R√°pido
            }
            
            // Atualizar UI
            completeScore.textContent = score;
            completeSize.textContent = size;
            completeTime.textContent = formatTime(time);
            completeBonus.textContent = timeBonus;
            
            // Atualizar estrelas
            star1.classList.add('filled');
            star2.classList.remove('filled');
            star3.classList.remove('filled');
            
            if (stars >= 2) star2.classList.add('filled');
            if (stars >= 3) star3.classList.add('filled');
            
            // Mostrar/esconder bot√£o de pr√≥ximo n√≠vel
            const levels = ['easy', 'medium', 'hard', 'extreme'];
            const currentIndex = levels.indexOf(gameState.level);
            
            if (currentIndex < levels.length - 1) {
                nextLevelBtn.style.display = 'block';
            } else {
                nextLevelBtn.style.display = 'none';
            }
            
            // Salvar pontua√ß√£o
            gameState.scores.push({
                mode: gameState.mode,
                level: gameState.level,
                score: totalScore,
                size: size,
                time: time,
                date: new Date().toISOString()
            });
            
            saveGameData();
            
            // Mostrar tela de conclus√£o
            levelComplete.style.display = 'flex';
        }
        
        // Ir para pr√≥ximo n√≠vel
        function nextLevel() {
            const levels = ['easy', 'medium', 'hard', 'extreme'];
            const currentIndex = levels.indexOf(gameState.level);
            
            if (currentIndex < levels.length - 1) {
                gameState.level = levels[currentIndex + 1];
                
                // Atualizar bot√µes de n√≠vel no menu
                levelButtons.forEach(btn => {
                    btn.classList.remove('active');
                    if (btn.dataset.level === gameState.level) {
                        btn.classList.add('active');
                    }
                });
                
                restartGame();
                hideResultScreens();
            }
        }
        
        // Formatar tempo
        function formatTime(seconds) {
            const minutes = Math.floor(seconds / 60);
            const remainingSeconds = seconds % 60;
            return `${minutes.toString().padStart(2, '0')}:${remainingSeconds.toString().padStart(2, '0')}`;
        }
        
        // Inicializar o jogo
        init();
